<!-- USER -->
<button
    *ngIf="!transferState"
    class="user shadow rounded p-4"
    [matMenuTriggerFor]="menu"
>
    <div class="text-center">
        <app-avatar [avatarUrl]="user.avatarUrl"></app-avatar>
    </div>

    <div class="text-center mt-2">
        <div class="name">{{ user.name }}</div>
        <small>{{ user.device }}</small>
    </div>
</button>

<!-- ACTIVE USER -->
<div *ngIf="transferState" class="user-active shadow rounded p-3">
    <div class="user-info text-center">
        <div class="avatar mr-1">
            <app-avatar [avatarUrl]="user.avatarUrl"></app-avatar>
        </div>
        <span class="name">{{ user.name }}</span>
    </div>

    <app-file-transfer-state
        [status]="transferState.status"
        (onConfirm)="confirm.emit(user.id)"
        (onCancel)="cancel.emit(user.id)"
    >
    </app-file-transfer-state>
</div>

<!-- MENU FOR DESKTOP -->
<mat-menu #menu="matMenu" yPosition="above">
    <button mat-menu-item (click)="openChat.emit(user.id)">
        <mat-icon>comment</mat-icon>Have a chat
    </button>
    <label mat-menu-item>
        <mat-icon>description</mat-icon>
        Send file
        <input
            [formControl]="filesInput"
            class="d-none"
            type="file"
            multiple
            (change)="handleFilesSelect($event)"
        />
    </label>
</mat-menu>
