

<div *ngIf="user" class="user-element">
    <ng-container *ngIf="showFileTransferPopup" [ngTemplateOutlet]="fileTransferOffer"></ng-container>

    <app-avatar
            [avatarUrl]="user?.avatarUrl || ''"
            [progress]="zippingProgress"
            [matMenuTriggerFor]="menu"
            (chatNotificationClick)="selectedChatIdChange.emit(user.id)"
            [chatNotification]="chatNotification"
    ></app-avatar>

    <div class="name mt-1">{{user?.name}}</div>
    <small>{{user?.device}}</small>
</div>


<mat-menu #menu="matMenu" yPosition="above">
    <button mat-menu-item (click)="selectedChatIdChange.emit(user.id)">
        <mat-icon>comment</mat-icon>Have a chat
    </button>
    <label mat-menu-item>
        <mat-icon>description</mat-icon>
        Send file
        <input class="d-none" type="file" multiple (change)="handleFilesSelect($event)">
    </label>
</mat-menu>


<ng-template #fileTransferOffer>
    <div class="file-transfer-offer">
        <h2>File transfer</h2>
        <p>Do you want to accept file <b>maslo.png</b>?</p>
        <button mat-flat-button class="mr-2" (click)="declineFileTransfer()">Decline</button>
        <button mat-flat-button color="accent" (click)="acceptFileTransfer()">Accept</button>
    </div>
</ng-template>