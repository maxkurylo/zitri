

<div *ngIf="user" class="user-element">
    <app-file-transfer-popup
            *ngIf="fileTransferPopupState !== null"
            [state]="fileTransferPopupState"
            [fileInfo]="receivingFileInfo"
            (onAgree)="handleFilePopupAgree()"
            (onCancel)="handleFilePopupCancel()"
    >
    </app-file-transfer-popup>

    <app-avatar
            [class.pe-none]="fileTransferPopupState"
            [avatarUrl]="user?.avatarUrl || ''"
            [progress]="zippingProgress || transferProgress"
            [matMenuTriggerFor]="menu"
            (chatNotificationClick)="selectedChatIdChange.emit(user.id)"
            [chatNotification]="chatNotification"
    ></app-avatar>

    <div *ngIf="showSuccessMark" class="success-mark">
        <i class="material-icons">done</i>
    </div>

    <div class="name mt-1">{{user?.name}}</div>
    <small>{{user?.device}}</small>
</div>


<mat-menu #menu="matMenu" yPosition="above">
    <button mat-menu-item (click)="selectedChatIdChange.emit(user.id)">
        <mat-icon>comment</mat-icon>Have a chat
    </button>
    <label mat-menu-item>
        <mat-icon>description</mat-icon>
        Send file
        <input class="d-none" type="file" multiple (change)="handleFilesSelect($event)">
    </label>
</mat-menu>